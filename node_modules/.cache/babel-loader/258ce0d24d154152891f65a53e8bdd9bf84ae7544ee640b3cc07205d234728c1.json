{"ast":null,"code":"var _jsxFileName = \"D:\\\\thankyoustickers\\\\Web-Application-Security-based-on-OWASP\\\\src\\\\components\\\\ProtectedRoute.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { Navigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport AuthModal from './AuthModal';\nimport './ProtectedRoute.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ProtectedRoute = ({\n  children,\n  role\n}) => {\n  _s();\n  const {\n    user,\n    loading\n  } = useAuth();\n  const location = useLocation();\n  const [showAuthModal, setShowAuthModal] = useState(false);\n  useEffect(() => {\n    // Show auth modal if user is not authenticated\n    if (!loading && !user) {\n      setShowAuthModal(true);\n    }\n  }, [loading, user]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loader\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 22,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 7\n    }, this);\n  }\n\n  // If user is not authenticated, show auth modal\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"protected-content-placeholder\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Please login to access this page\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AuthModal, {\n        isOpen: showAuthModal,\n        onClose: () => setShowAuthModal(false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n  // Check role if specified\n  if (role && user.role !== role) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/\",\n      replace: true,\n      state: {\n        from: location\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 12\n    }, this);\n  }\n  return children;\n};\n_s(ProtectedRoute, \"pmaRd1/1PndsvqAVT2F2JaWIb0I=\", false, function () {\n  return [useAuth, useLocation];\n});\n_c = ProtectedRoute;\nexport default ProtectedRoute;\nvar _c;\n$RefreshReg$(_c, \"ProtectedRoute\");","map":{"version":3,"names":["useEffect","useState","Navigate","useLocation","useAuth","AuthModal","jsxDEV","_jsxDEV","Fragment","_Fragment","ProtectedRoute","children","role","_s","user","loading","location","showAuthModal","setShowAuthModal","className","fileName","_jsxFileName","lineNumber","columnNumber","isOpen","onClose","to","replace","state","from","_c","$RefreshReg$"],"sources":["D:/thankyoustickers/Web-Application-Security-based-on-OWASP/src/components/ProtectedRoute.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { Navigate, useLocation } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport AuthModal from './AuthModal';\r\nimport './ProtectedRoute.css';\r\n\r\nconst ProtectedRoute = ({ children, role }) => {\r\n  const { user, loading } = useAuth();\r\n  const location = useLocation();\r\n  const [showAuthModal, setShowAuthModal] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Show auth modal if user is not authenticated\r\n    if (!loading && !user) {\r\n      setShowAuthModal(true);\r\n    }\r\n  }, [loading, user]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"loading-container\">\r\n        <div className=\"loader\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // If user is not authenticated, show auth modal\r\n  if (!user) {\r\n    return (\r\n      <>\r\n        <div className=\"protected-content-placeholder\">\r\n          <p>Please login to access this page</p>\r\n        </div>\r\n        <AuthModal \r\n          isOpen={showAuthModal} \r\n          onClose={() => setShowAuthModal(false)}\r\n        />\r\n      </>\r\n    );\r\n  }\r\n\r\n  // Check role if specified\r\n  if (role && user.role !== role) {\r\n    return <Navigate to=\"/\" replace state={{ from: location }} />;\r\n  }\r\n  return children;\r\n};\r\n\r\nexport default ProtectedRoute; "],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,QAAQ,EAAEC,WAAW,QAAQ,kBAAkB;AACxD,SAASC,OAAO,QAAQ,wBAAwB;AAChD,OAAOC,SAAS,MAAM,aAAa;AACnC,OAAO,sBAAsB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAE9B,MAAMC,cAAc,GAAGA,CAAC;EAAEC,QAAQ;EAAEC;AAAK,CAAC,KAAK;EAAAC,EAAA;EAC7C,MAAM;IAAEC,IAAI;IAAEC;EAAQ,CAAC,GAAGX,OAAO,CAAC,CAAC;EACnC,MAAMY,QAAQ,GAAGb,WAAW,CAAC,CAAC;EAC9B,MAAM,CAACc,aAAa,EAAEC,gBAAgB,CAAC,GAAGjB,QAAQ,CAAC,KAAK,CAAC;EAEzDD,SAAS,CAAC,MAAM;IACd;IACA,IAAI,CAACe,OAAO,IAAI,CAACD,IAAI,EAAE;MACrBI,gBAAgB,CAAC,IAAI,CAAC;IACxB;EACF,CAAC,EAAE,CAACH,OAAO,EAAED,IAAI,CAAC,CAAC;EAEnB,IAAIC,OAAO,EAAE;IACX,oBACER,OAAA;MAAKY,SAAS,EAAC,mBAAmB;MAAAR,QAAA,eAChCJ,OAAA;QAAKY,SAAS,EAAC;MAAQ;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC3B,CAAC;EAEV;;EAEA;EACA,IAAI,CAACT,IAAI,EAAE;IACT,oBACEP,OAAA,CAAAE,SAAA;MAAAE,QAAA,gBACEJ,OAAA;QAAKY,SAAS,EAAC,+BAA+B;QAAAR,QAAA,eAC5CJ,OAAA;UAAAI,QAAA,EAAG;QAAgC;UAAAS,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACpC,CAAC,eACNhB,OAAA,CAACF,SAAS;QACRmB,MAAM,EAAEP,aAAc;QACtBQ,OAAO,EAAEA,CAAA,KAAMP,gBAAgB,CAAC,KAAK;MAAE;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxC,CAAC;IAAA,eACF,CAAC;EAEP;;EAEA;EACA,IAAIX,IAAI,IAAIE,IAAI,CAACF,IAAI,KAAKA,IAAI,EAAE;IAC9B,oBAAOL,OAAA,CAACL,QAAQ;MAACwB,EAAE,EAAC,GAAG;MAACC,OAAO;MAACC,KAAK,EAAE;QAAEC,IAAI,EAAEb;MAAS;IAAE;MAAAI,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAC/D;EACA,OAAOZ,QAAQ;AACjB,CAAC;AAACE,EAAA,CAxCIH,cAAc;EAAA,QACQN,OAAO,EAChBD,WAAW;AAAA;AAAA2B,EAAA,GAFxBpB,cAAc;AA0CpB,eAAeA,cAAc;AAAC,IAAAoB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}